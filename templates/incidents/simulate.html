{% extends 'base.html' %}

{% block title %}Simuler un Incident - SecureFlow{% endblock %}

{% block content %}
<div class="card" style="max-width: 800px; margin: 0 auto;">
    <h1>üé≠ Simuler un Incident de Test</h1>
    <p style="color: var(--text-gray); margin-bottom: 2rem;">
        Cr√©ez un incident simul√© pour tester vos playbooks automatis√©s
    </p>
    
    <form method="post">
        {% csrf_token %}
        
        <div class="form-group">
            {{ form.scenario.label_tag }}
            {{ form.scenario }}
        </div>
        
        <div class="form-group">
            {{ form.source_ip.label_tag }}
            {{ form.source_ip }}
            <small style="color: var(--text-muted); display: block; margin-top: 0.5rem;">
                Adresse IP fictive pour la simulation
            </small>
        </div>
        
        <div class="form-group">
            {{ form.severity.label_tag }}
            {{ form.severity }}
        </div>
        
        <div style="display: flex; gap: 1rem; margin-top: 2rem;">
            <button type="submit" class="btn btn-primary">
                ‚ñ∂Ô∏è Lancer la Simulation
            </button>
            <a href="{% url 'incidents:list' %}" class="btn btn-danger">
                ‚ùå Annuler
            </a>
        </div>
    </form>
</div>

<!-- Informations sur les sc√©narios -->
<div class="card" style="max-width: 800px; margin: 2rem auto;">
    <h2>üìñ Sc√©narios de Test</h2>
    
    <div style="display: flex; flex-direction: column; gap: 1.5rem; margin-top: 1.5rem;">
        <!-- Sc√©nario 1 -->
        <div style="background: var(--bg-darker); padding: 1.5rem; border-radius: 10px; border-left: 4px solid var(--primary);">
            <h3 style="color: var(--primary); margin-bottom: 0.5rem;">üö® IP Suspecte</h3>
            <p style="color: var(--text-gray); margin-bottom: 1rem;">
                Simule une connexion depuis une adresse IP potentiellement malveillante.
            </p>
            <div style="background: var(--bg-dark); padding: 1rem; border-radius: 5px;">
                <p style="color: var(--accent); font-size: 0.9rem; margin: 0;">
                    ‚úì D√©clenche les playbooks de type "IP Suspecte"<br>
                    ‚úì Actions possibles : Blocage IP, Enrichissement Threat Intel
                </p>
            </div>
        </div>
        
        <!-- Sc√©nario 2 -->
        <div style="background: var(--bg-darker); padding: 1.5rem; border-radius: 10px; border-left: 4px solid var(--warning);">
            <h3 style="color: var(--warning); margin-bottom: 0.5rem;">üîê √âchecs d'Authentification</h3>
            <p style="color: var(--text-gray); margin-bottom: 1rem;">
                Simule 8 tentatives de connexion √©chou√©es en 2 minutes (attaque par force brute).
            </p>
            <div style="background: var(--bg-dark); padding: 1rem; border-radius: 5px;">
                <p style="color: var(--accent); font-size: 0.9rem; margin: 0;">
                    ‚úì D√©clenche les playbooks "√âchecs d'authentification"<br>
                    ‚úì Actions possibles : Blocage IP, Notification email, Cr√©ation ticket
                </p>
            </div>
        </div>
        
        <!-- Sc√©nario 3 -->
        <div style="background: var(--bg-darker); padding: 1.5rem; border-radius: 10px; border-left: 4px solid var(--danger);">
            <h3 style="color: var(--danger); margin-bottom: 0.5rem;">üîç Scan de Ports</h3>
            <p style="color: var(--text-gray); margin-bottom: 1rem;">
                Simule un scan de 50 ports diff√©rents (tentative de reconnaissance r√©seau).
            </p>
            <div style="background: var(--bg-dark); padding: 1rem; border-radius: 5px;">
                <p style="color: var(--accent); font-size: 0.9rem; margin: 0;">
                    ‚úì D√©clenche les playbooks "Scan de ports"<br>
                    ‚úì Actions possibles : Blocage IP imm√©diat, Alerte critique
                </p>
            </div>
        </div>
    </div>
</div>

<!-- Avertissement -->
<div class="card" style="max-width: 800px; margin: 2rem auto; border: 2px solid var(--accent);">
    <h3 style="color: var(--accent); margin-bottom: 1rem;">üí° Conseil</h3>
    <p style="color: var(--text-gray); line-height: 1.8;">
        Avant de simuler un incident, assurez-vous d'avoir cr√©√© et activ√© au moins un playbook 
        correspondant au type d'incident que vous voulez tester. Les incidents sans playbook 
        actif ne d√©clencheront aucune action automatique.
    </p>
    <a href="{% url 'playbooks:list' %}" class="btn btn-accent" style="margin-top: 1rem;">
        üìö Voir mes Playbooks
    </a>
</div>
{% endblock %}
